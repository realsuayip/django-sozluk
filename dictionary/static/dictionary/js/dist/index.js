!function(){let e,t,n;function i(e){return e&&e.__esModule?e.default:e}var r,o,a,s,l,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},u={},d={},p=c.parcelRequire53a9;null==p&&((p=function(e){if(e in u)return u[e].exports;if(e in d){var t=d[e];delete d[e];var n={id:e,exports:{}};return u[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){d[e]=t},c.parcelRequire53a9=p),(0,p.register)("iS9jW",function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){return t&&("object"===n(t)||"function"==typeof t)?t:o(e)}function o(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var p=function(){function e(){c(this,e)}return d(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o,a=s(t);try{for(a.s();!(o=a.n()).done;)o.value.apply(this,i)}catch(e){a.e(e)}finally{a.f()}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}return this}}]),e}(),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=a(l);if(t){var i=a(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return r(this,e)});function l(e,t){if(c(this,l),(i=n.call(this)).element=e,i.version=l.version,i.defaultOptions.previewTemplate=i.defaultOptions.previewTemplate.replace(/\n*/g,""),i.clickableElements=[],i.listeners=[],i.files=[],"string"==typeof i.element&&(i.element=document.querySelector(i.element)),!i.element||null==i.element.nodeType)throw Error("Invalid dropzone element.");if(i.element.dropzone)throw Error("Dropzone already attached.");l.instances.push(o(i)),i.element.dropzone=o(i);var i,a,s,u=null!=(s=l.optionsForElement(i.element))?s:{};if(i.options=l.extend({},i.defaultOptions,u,null!=t?t:{}),i.options.forceFallback||!l.isBrowserSupported())return r(i,i.options.fallback.call(o(i)));if(null==i.options.url&&(i.options.url=i.element.getAttribute("action")),!i.options.url)throw Error("No URL provided.");if(i.options.acceptedFiles&&i.options.acceptedMimeTypes)throw Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(i.options.uploadMultiple&&i.options.chunking)throw Error("You cannot set both: uploadMultiple and chunking.");return i.options.acceptedMimeTypes&&(i.options.acceptedFiles=i.options.acceptedMimeTypes,delete i.options.acceptedMimeTypes),null!=i.options.renameFilename&&(i.options.renameFile=function(e){return i.options.renameFilename.call(o(i),e.name,e)}),"string"==typeof i.options.method&&(i.options.method=i.options.method.toUpperCase()),(a=i.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==i.options.previewsContainer&&(i.options.previewsContainer?i.previewsContainer=l.getElement(i.options.previewsContainer,"previewsContainer"):i.previewsContainer=i.element),i.options.clickable&&(!0===i.options.clickable?i.clickableElements=[i.element]:i.clickableElements=l.getElements(i.options.clickable,"clickable")),i.init(),i}return d(l,null,[{key:"initClass",value:function(){this.prototype.Emitter=p,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){this.element.className="".concat(this.element.className," dz-browser-not-supported");var e,t,n=s(this.element.getElementsByTagName("div"));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )dz-message($| )/.test(i.className)){e=i,i.className="dz-message";break}}}catch(e){n.e(e)}finally{n.f()}e||(e=l.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var r=e.getElementsByTagName("span")[0];return r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;null==t&&null==n?(t=r.srcWidth,n=r.srcHeight):null==t?t=n*o:null==n&&(n=t/o);var a=(t=Math.min(t,r.srcWidth))/(n=Math.min(n,r.srcHeight));if(r.srcWidth>t||r.srcHeight>n){if("crop"===i)o>a?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*a):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/a);else if("contain"===i)o>a?n=t/o:t=n*o;else throw Error("Unknown resizeMethod '".concat(i,"'"))}return r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=n,r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=l.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var n,i=s(e.previewElement.querySelectorAll("[data-dz-name]"));try{for(i.s();!(n=i.n()).done;){var r=n.value;r.textContent=e.name}}catch(e){i.e(e)}finally{i.f()}var o,a=s(e.previewElement.querySelectorAll("[data-dz-size]"));try{for(a.s();!(o=a.n()).done;)(r=o.value).innerHTML=this.filesize(e.size)}catch(e){a.e(e)}finally{a.f()}this.options.addRemoveLinks&&(e._removeLink=l.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));var c,u=function(n){return(n.preventDefault(),n.stopPropagation(),e.status===l.UPLOADING)?l.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?l.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},d=s(e.previewElement.querySelectorAll("[data-dz-remove]"));try{for(d.s();!(c=d.n()).done;)c.value.addEventListener("click",u)}catch(e){d.e(e)}finally{d.f()}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var n,i=s(e.previewElement.querySelectorAll("[data-dz-thumbnail]"));try{for(i.s();!(n=i.n()).done;){var r=n.value;r.alt=e.name,r.src=t}}catch(e){i.e(e)}finally{i.f()}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);var n,i=s(e.previewElement.querySelectorAll("[data-dz-errormessage]"));try{for(i.s();!(n=i.n()).done;)n.value.textContent=t}catch(e){i.e(e)}finally{i.f()}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement){var i,r=s(e.previewElement.querySelectorAll("[data-dz-uploadprogress]"));try{for(r.s();!(i=r.n()).done;){var o=i.value;"PROGRESS"===o.nodeName?o.value=t:o.style.width="".concat(t,"%")}}catch(e){r.e(e)}finally{r.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var o=n[r];for(var a in o){var s=o[a];e[a]=s}}return e}}]),d(l,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(l.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(l.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(l.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===l.UPLOADING||e.status===l.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(l.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function t(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",l.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var n=e.hiddenFileInput.files;if(n.length){var i,r=s(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;e.addFile(o)}}catch(e){r.e(e)}finally{r.f()}}return e.emit("addedfiles",n),t()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var t,n=s(this.events);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.on(i,this.options[i])}}catch(e){n.e(e)}finally{n.f()}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var r=function(e){if(e.dataTransfer.types){for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0}return!1},o=function(e){if(r(e))return(e.stopPropagation(),e.preventDefault)?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return o(t),e.emit("dragenter",t)},dragover:function(t){var n;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",o(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return o(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(t){return e.listeners.push({element:t,events:{click:function(n){return(t!==e.element||n.target===e.element||l.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,l.instances.splice(l.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=0,t=0;if(this.getActiveFiles().length){var n,i,r=s(this.getActiveFiles());try{for(r.s();!(i=r.n()).done;){var o=i.value;e+=o.upload.bytesSent,t+=o.upload.total}}catch(e){r.e(e)}finally{r.f()}n=100*e/t}else n=100;return this.emit("totaluploadprogress",n,t,e)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){if(e=this.getExistingFallback())return e;var e,t,n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>".concat(this.options.dictFallbackText,"</p>")),n+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var i=l.createElement(n);return"FORM"!==this.element.tagName?(t=l.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i}},{key:"getExistingFallback",value:function(){for(var e=0,t=["div","form"];e<t.length;e++){var n,i=t[e];if(n=function(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )fallback($| )/.test(i.className))return i}}catch(e){n.e(e)}finally{n.f()}}(this.element.getElementsByTagName(i)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.addEventListener(n,i,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.removeEventListener(n,i,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(e>0){for(var i=["tb","gb","mb","kb","b"],r=0;r<i.length;r++){var o=i[r];if(e>=Math.pow(this.options.filesizeBase,4-r)/10){t=e/Math.pow(this.options.filesizeBase,4-r),n=o;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){var t;if(null!=(null!=(t=null!=e?e.clipboardData:void 0)?t.items:void 0)){this.emit("paste",e);var n=e.clipboardData.items;if(n.length)return this._addFilesFromItems(n)}}},{key:"handleFiles",value:function(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.addFile(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){var n,i=[],r=s(e);try{for(r.s();!(n=r.n()).done;){var o,a=n.value;null!=a.webkitGetAsEntry&&(o=a.webkitGetAsEntry())?o.isFile?i.push(t.addFile(a.getAsFile())):o.isDirectory?i.push(t._addFilesFromDirectory(o,o.name)):i.push(void 0):null!=a.getAsFile&&(null==a.kind||"file"===a.kind)?i.push(t.addFile(a.getAsFile())):i.push(void 0)}}catch(e){r.e(e)}finally{r.f()}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var n=this,i=e.createReader(),r=function(e){var t;return null!=(t=console)&&"function"==typeof t.log?t.log(e):void 0};return function e(){return i.readEntries(function(i){if(i.length>0){var r,o=s(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.isFile?a.file(function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(t,"/").concat(e.name),n.addFile(e)}):a.isDirectory&&n._addFilesFromDirectory(a,"".concat(t,"/").concat(a.name))}}catch(e){o.e(e)}finally{o.f()}e()}return null},r)}()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1048576*this.options.maxFilesize?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):l.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;e.upload={uuid:l.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=l.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(n){n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.enqueueFile(i)}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status===l.ADDED&&!0===e.accepted){if(e.status=l.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}else throw Error("This file can't be queued because it has already been processed or was rejected.")}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===l.UPLOADING&&this.cancelUpload(e),this.files=f(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t,n=s(this.files.slice());try{for(n.s();!(t=n.n()).done;){var i=t.value;(i.status!==l.UPLOADING||e)&&this.removeFile(i)}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"resizeImage",value:function(e,t,n,i,r){var o=this;return this.createThumbnail(e,t,n,i,!0,function(t,n){if(null==n)return r(e);var i=o.options.resizeMimeType;null==i&&(i=e.type);var a=n.toDataURL(i,o.options.resizeQuality);return("image/jpeg"===i||"image/jpg"===i)&&(a=y.restore(e.dataURL,a)),r(l.dataURItoBlob(a))})}},{key:"createThumbnail",value:function(e,t,n,i,r,o){var a=this,s=new FileReader;s.onload=function(){if(e.dataURL=s.result,"image/svg+xml"===e.type){null!=o&&o(s.result);return}a.createThumbnailFromUrl(e,t,n,i,r,o)},s.readAsDataURL(e)}},{key:"displayExistingFile",value:function(e,t,n,i){var r=this,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4];this.emit("addedfile",e),this.emit("complete",e),o?(e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,function(t){r.emit("thumbnail",e,t),n&&n()},i)):(this.emit("thumbnail",e,t),n&&n())}},{key:"createThumbnailFromUrl",value:function(e,t,n,i,r,o,a){var s=this,l=document.createElement("img");return a&&(l.crossOrigin=a),r="from-image"!=getComputedStyle(document.body).imageOrientation&&r,l.onload=function(){var a=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&r&&(a=function(e){return EXIF.getData(l,function(){return e(EXIF.getTag(this,"Orientation"))})}),a(function(r){e.width=l.width,e.height=l.height;var a=s.options.resize.call(s,e,t,n,i),c=document.createElement("canvas"),u=c.getContext("2d");switch(c.width=a.trgWidth,c.height=a.trgHeight,r>4&&(c.width=a.trgHeight,c.height=a.trgWidth),r){case 2:u.translate(c.width,0),u.scale(-1,1);break;case 3:u.translate(c.width,c.height),u.rotate(Math.PI);break;case 4:u.translate(0,c.height),u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI),u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI),u.translate(0,-c.width);break;case 7:u.rotate(.5*Math.PI),u.translate(c.height,-c.width),u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI),u.translate(-c.height,0)}v(u,l,null!=a.srcX?a.srcX:0,null!=a.srcY?a.srcY:0,a.srcWidth,a.srcHeight,null!=a.trgX?a.trgX:0,null!=a.trgY?a.trgY:0,a.trgWidth,a.trgHeight);var d=c.toDataURL("image/png");if(null!=o)return o(d,c)})},null!=o&&(l.onerror=o),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(t>=e)){var i=this.getQueuedFiles();if(i.length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.processing=!0,i.status=l.UPLOADING,this.emit("processing",i)}}catch(e){n.e(e)}finally{n.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===l.UPLOADING){var t,n=this._getFilesWithXhr(e.xhr),i=s(n);try{for(i.s();!(t=i.n()).done;)t.value.status=l.CANCELED}catch(e){i.e(e)}finally{i.f()}void 0!==e.xhr&&e.xhr.abort();var r,o=s(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.emit("canceled",a)}}catch(e){o.e(e)}finally{o.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(e.status===l.ADDED||e.status===l.QUEUED)&&(e.status=l.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,function(n){if(t.options.chunking){var i=n[0];e[0].upload.chunked=t.options.chunking&&(t.options.forceChunking||i.size>t.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(i.size/t.options.chunkSize)}if(e[0].upload.chunked){var r=e[0],o=n[0],a=0;r.upload.chunks=[];var s=function(){for(var n=0;void 0!==r.upload.chunks[n];)n++;if(!(n>=r.upload.totalChunkCount)){a++;var i=n*t.options.chunkSize,s=Math.min(i+t.options.chunkSize,o.size),c={name:t._getParamName(0),data:o.webkitSlice?o.webkitSlice(i,s):o.slice(i,s),filename:r.upload.filename,chunkIndex:n};r.upload.chunks[n]={file:r,index:n,dataBlock:c,status:l.UPLOADING,progress:0,retries:0},t._uploadData(e,[c])}};if(r.upload.finishedChunkUpload=function(n){var i=!0;n.status=l.SUCCESS,n.dataBlock=null,n.xhr=null;for(var o=0;o<r.upload.totalChunkCount;o++){if(void 0===r.upload.chunks[o])return s();r.upload.chunks[o].status!==l.SUCCESS&&(i=!1)}i&&t.options.chunksUploaded(r,function(){t._finished(e,"",null)})},t.options.parallelChunkUploads)for(var c=0;c<r.upload.totalChunkCount;c++)s();else s()}else{for(var u=[],d=0;d<e.length;d++)u[d]={name:t._getParamName(d),data:n[d],filename:e[d].upload.filename};t._uploadData(e,u)}})}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(e,t){var n,i=this,r=new XMLHttpRequest,o=s(e);try{for(o.s();!(n=o.n()).done;)n.value.xhr=r}catch(e){o.e(e)}finally{o.f()}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=r);var a=this.resolveOption(this.options.method,e),c=this.resolveOption(this.options.url,e);r.open(a,c,!0),r.timeout=this.resolveOption(this.options.timeout,e),r.withCredentials=!!this.options.withCredentials,r.onload=function(t){i._finishedUploading(e,r,t)},r.ontimeout=function(){i._handleUploadError(e,r,"Request timedout after ".concat(i.options.timeout/1e3," seconds"))},r.onerror=function(){i._handleUploadError(e,r)},(null!=r.upload?r.upload:r).onprogress=function(t){return i._updateFilesUploadProgress(e,r,t)};var u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var d in this.options.headers&&l.extend(u,this.options.headers),u){var p=u[d];p&&r.setRequestHeader(d,p)}var h=new FormData;if(this.options.params){var f=this.options.params;for(var m in"function"==typeof f&&(f=f.call(this,e,r,e[0].upload.chunked?this._getChunk(e[0],r):null)),f){var g=f[m];if(Array.isArray(g))for(var v=0;v<g.length;v++)h.append(m,g[v]);else h.append(m,g)}}var y,b=s(e);try{for(b.s();!(y=b.n()).done;){var k=y.value;this.emit("sending",k,r,h)}}catch(e){b.e(e)}finally{b.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",e,r,h),this._addFormElementData(h);for(var w=0;w<t.length;w++){var x=t[w];h.append(x.name,x.data,x.filename)}this.submitRequest(r,h,e)}},{key:"_transformFiles",value:function(e,t){for(var n=this,i=[],r=0,o=function(o){n.options.transformFile.call(n,e[o],function(n){i[o]=n,++r===e.length&&t(i)})},a=0;a<e.length;a++)o(a)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t,n=s(this.element.querySelectorAll("input, textarea, select, button"));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.getAttribute("name"),o=i.getAttribute("type");if(o&&(o=o.toLowerCase()),null!=r){if("SELECT"===i.tagName&&i.hasAttribute("multiple")){var a,l=s(i.options);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.selected&&e.append(r,c.value)}}catch(e){l.e(e)}finally{l.f()}}else(!o||"checkbox"!==o&&"radio"!==o||i.checked)&&e.append(r,i.value)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var i;if(void 0!==n){if(i=100*n.loaded/n.total,e[0].upload.chunked){var r=e[0],o=this._getChunk(r,t);o.progress=i,o.total=n.total,o.bytesSent=n.loaded,r.upload.progress=0,r.upload.total=0,r.upload.bytesSent=0;for(var a=0;a<r.upload.totalChunkCount;a++)void 0!==r.upload.chunks[a]&&void 0!==r.upload.chunks[a].progress&&(r.upload.progress+=r.upload.chunks[a].progress,r.upload.total+=r.upload.chunks[a].total,r.upload.bytesSent+=r.upload.chunks[a].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount}else{var l,c=s(e);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.upload.progress=i,u.upload.total=n.total,u.upload.bytesSent=n.loaded}}catch(e){c.e(e)}finally{c.f()}}var d,p=s(e);try{for(p.s();!(d=p.n()).done;){var h=d.value;this.emit("uploadprogress",h,h.upload.progress,h.upload.bytesSent)}}catch(e){p.e(e)}finally{p.f()}}else{var f=!0;i=100;var m,g=s(e);try{for(g.s();!(m=g.n()).done;){var v=m.value;(100!==v.upload.progress||v.upload.bytesSent!==v.upload.total)&&(f=!1),v.upload.progress=i,v.upload.bytesSent=v.upload.total}}catch(e){g.e(e)}finally{g.f()}if(f)return;var y,b=s(e);try{for(b.s();!(y=b.n()).done;){var k=y.value;this.emit("uploadprogress",k,i,k.upload.bytesSent)}}catch(e){b.e(e)}finally{b.f()}}}},{key:"_finishedUploading",value:function(e,t,n){var i;if(e[0].status!==l.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(e){n=e,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,i,n):this._handleUploadError(e,t,i)}}},{key:"_handleUploadError",value:function(e,t,n){if(e[0].status!==l.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(e[0],t);if(i.retries++<this.options.retryChunksLimit){this._uploadData(e,[i.dataBlock]);return}console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t,n){e.send(t)}},{key:"_finished",value:function(e,t,n){var i,r=s(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.status=l.SUCCESS,this.emit("success",o,t,n),this.emit("complete",o)}}catch(e){r.e(e)}finally{r.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,n){var i,r=s(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.status=l.ERROR,this.emit("error",o,t,n),this.emit("complete",o)}}catch(e){r.e(e)}finally{r.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),l}(p);h.initClass(),h.version="5.7.2",h.options={},h.optionsForElement=function(e){return e.getAttribute("id")?h.options[m(e.getAttribute("id"))]:void 0},h.instances=[],h.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),(null!=e?e.dropzone:void 0)==null)throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},h.autoDiscover=!0,h.discover=function(){var e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){var n,i=[],r=s(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;/(^| )dropzone($| )/.test(o.className)?i.push(e.push(o)):i.push(void 0)}}catch(e){r.e(e)}finally{r.f()}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t,n=[],i=s(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;!1!==h.optionsForElement(r)?n.push(new h(r)):n.push(void 0)}}catch(e){i.e(e)}finally{i.f()}return n}()},h.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],h.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if("classList"in document.createElement("a")){var t,n=s(h.blacklistedBrowsers);try{for(n.s();!(t=n.n()).done;)if(t.value.test(navigator.userAgent)){e=!1;continue}}catch(e){n.e(e)}finally{n.f()}}else e=!1}else e=!1;return e},h.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0,a=t.length,s=0<=a;s?o<=a:o>=a;s?o++:o--)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})};var f=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},m=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};h.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},h.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},h.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},h.getElements=function(e,t){var n,i;if(e instanceof Array){i=[];try{var r,o=s(e);try{for(o.s();!(r=o.n()).done;)n=r.value,i.push(this.getElement(n,t))}catch(e){o.e(e)}finally{o.f()}}catch(e){i=null}}else if("string"==typeof e){i=[];var a,l=s(document.querySelectorAll(e));try{for(l.s();!(a=l.n()).done;)n=a.value,i.push(n)}catch(e){l.e(e)}finally{l.f()}}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},h.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},h.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var n,i=e.type,r=i.replace(/\/.*$/,""),o=s(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a=a.trim(),"."===a.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(a.toLowerCase(),e.name.length-a.length))return!0}else if(/\/\*$/.test(a)){if(r===a.replace(/\/.*$/,""))return!0}else if(i===a)return!0}}catch(e){o.e(e)}finally{o.f()}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new h(this,e)})}),null!==e?e.exports=h:window.Dropzone=h,h.ADDED="added",h.QUEUED="queued",h.ACCEPTED=h.QUEUED,h.UPLOADING="uploading",h.PROCESSING=h.UPLOADING,h.CANCELED="canceled",h.ERROR="error",h.SUCCESS="success";var g=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var r=i.getImageData(1,0,1,t).data,o=0,a=t,s=t;s>o;)0===r[(s-1)*4+3]?a=s:o=s,s=a+o>>1;var l=s/t;return 0===l?1:l},v=function(e,t,n,i,r,o,a,s,l,c){var u=g(t);return e.drawImage(t,n,i,r,o,a,s,l,c/u)},y=function(){function e(){c(this,e)}return d(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,r="",o=void 0,a=void 0,s=void 0,l="",c=0;n=e[c++],i=e[c++],r=e[c++],o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(l),n=i=r="",o=a=s=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),r=this.exifManipulation(t,i);return"data:image/jpeg;base64,".concat(this.encode64(r))}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),a=i.slice(r),s=o;return(s=s.concat(t)).concat(a)}},{key:"slice2Segments",value:function(e){for(var t,n=0,i=[];!(255===e[n]&218===e[n+1]);){if(255===e[n]&216===e[n+1])n+=2;else{t=256*e[n+2]+e[n+3];var r=n+t+2,o=e.slice(n,r);i.push(o),n=r}if(n>e.length)break}return i}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",r=void 0,o=void 0,a=void 0,s="",l=0,c=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),a=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),t=r<<2|o>>4,n=(15&o)<<4|a>>2,i=(3&a)<<6|s,c.push(t),64!==a&&c.push(n),64!==s&&c.push(i),t=n=i="",r=o=a=s="",l<e.length;);return c}}]),e}();y.initClass(),h._autoDiscoverFunction=function(){if(h.autoDiscover)return h.discover()},function(e,t){var n=!1,i=!0,r=e.document,o=r.documentElement,a=r.addEventListener?"addEventListener":"attachEvent",s=r.addEventListener?"removeEventListener":"detachEvent",l=r.addEventListener?"":"on",c=function i(o){if(("readystatechange"!==o.type||"complete"===r.readyState)&&(("load"===o.type?e:r)[s](l+o.type,i,!1),!n&&(n=!0)))return t.call(e,o.type||o)};if("complete"!==r.readyState){if(r.createEventObject&&o.doScroll){try{i=!e.frameElement}catch(e){}i&&function e(){try{o.doScroll("left")}catch(t){setTimeout(e,50);return}return c("poll")}()}r[a](l+"DOMContentLoaded",c,!1),r[a](l+"readystatechange",c,!1),e[a](l+"load",c,!1)}}(window,h._autoDiscoverFunction)});var h={};function f(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function m(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function g(e){var t=m(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function v(e){var t=m(e).Element;return e instanceof t||e instanceof Element}function y(e){var t=m(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function b(e){return e?(e.nodeName||"").toLowerCase():null}function k(e){return((v(e)?e.ownerDocument:e.document)||window.document).documentElement}function w(e){return f(k(e)).left+g(e).scrollLeft}function x(e){return m(e).getComputedStyle(e)}function E(e){var t=x(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function L(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function A(e){return"html"===b(e)?e:e.assignedSlot||e.parentNode||e.host||k(e)}function S(e,t){void 0===t&&(t=[]);var n=function e(t){return["html","body","#document"].indexOf(b(t))>=0?t.ownerDocument.body:y(t)&&E(t)?t:e(A(t))}(e),i="body"===b(n),r=m(n),o=i?[r].concat(r.visualViewport||[],E(n)?n:[]):n,a=t.concat(o);return i?a:a.concat(S(A(o)))}function C(e){if(!y(e)||"fixed"===x(e).position)return null;var t=e.offsetParent;if(t){var n=k(t);if("body"===b(t)&&"static"===x(t).position&&"static"!==x(n).position)return n}return t}function F(e){for(var t=m(e),n=C(e);n&&["table","td","th"].indexOf(b(n))>=0&&"static"===x(n).position;)n=C(n);return n&&"body"===b(n)&&"static"===x(n).position?t:n||function(e){for(var t=A(e);y(t)&&0>["html","body"].indexOf(b(t));){var n=x(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e)||t}h=function(){function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var t={read:function(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};return function n(i,r){function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),n=i.write(n,t);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=t+"="+n+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),s=a.slice(1).join("=");'"'===s[0]&&(s=s.slice(1,-1));try{var l=t.read(a[0]);if(r[l]=i.read(s,l),e===l)break}catch(e){}}return e?r[e]:r}},remove:function(t,n){o(t,"",e({},n,{expires:-1}))},withAttributes:function(t){return n(this.converter,e({},this.attributes,t))},withConverter:function(t){return n(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(i)}})}(t,{path:"/"})}();var _="bottom",$="right",T="left",M="auto",z=["top",_,$,T],O="start",D="viewport",I="popper",R=z.reduce(function(e,t){return e.concat([t+"-"+O,t+"-end"])},[]),U=[].concat(z,[M]).reduce(function(e,t){return e.concat([t,t+"-"+O,t+"-end"])},[]),j=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"],N={placement:"bottom",modifiers:[],strategy:"absolute"};function q(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var P={passive:!0};function H(e){return e.split("-")[0]}function B(e){return e.split("-")[1]}function W(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Q(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?H(r):null,a=r?B(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case"top":t={x:s,y:n.y-i.height};break;case _:t={x:s,y:n.y+n.height};break;case $:t={x:n.x+n.width,y:l};break;case T:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?W(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case O:t[c]=Math.floor(t[c])-Math.floor(n[u]/2-i[u]/2);break;case"end":t[c]=Math.floor(t[c])+Math.ceil(n[u]/2-i[u]/2)}}return t}var Y={top:"auto",right:"auto",bottom:"auto",left:"auto"};function K(e){var t,n,i,r,o,a=e.popper,s=e.popperRect,l=e.placement,c=e.offsets,u=e.position,d=e.gpuAcceleration,p=e.adaptive,h=(t=c.x,n=c.y,{x:Math.round(t*(i=window.devicePixelRatio||1))/i||0,y:Math.round(n*i)/i||0}),f=h.x,g=h.y,v=c.hasOwnProperty("x"),y=c.hasOwnProperty("y"),b=T,w="top",x=window;if(p){var E=F(a);E===m(a)&&(E=k(a)),"top"===l&&(w=_,g-=E.clientHeight-s.height,g*=d?1:-1),l===T&&(b=$,f-=E.clientWidth-s.width,f*=d?1:-1)}var L=Object.assign({position:u},p&&Y);return d?Object.assign(Object.assign({},L),{},((o={})[w]=y?"0":"",o[b]=v?"0":"",o.transform=2>(x.devicePixelRatio||1)?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",o)):Object.assign(Object.assign({},L),{},((r={})[w]=y?g+"px":"",r[b]=v?f+"px":"",r.transform="",r))}var X={left:"right",right:"left",bottom:"top",top:"bottom"};function G(e){return e.replace(/left|right|bottom|top/g,function(e){return X[e]})}var V={start:"end",end:"start"};function Z(e){return e.replace(/start|end/g,function(e){return V[e]})}function J(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ee(e,t){var n,i,r,o,a,s,l,c,u,d,p,h,v,b,E,L;return t===D?J((n=m(e),i=k(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0,r&&(o=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,l=r.offsetTop)),{width:o,height:a,x:s+w(e),y:l})):y(t)?((c=f(t)).top=c.top+t.clientTop,c.left=c.left+t.clientLeft,c.bottom=c.top+t.clientHeight,c.right=c.left+t.clientWidth,c.width=t.clientWidth,c.height=t.clientHeight,c.x=c.left,c.y=c.top,c):J((u=k(e),d=k(u),p=g(u),h=u.ownerDocument.body,v=Math.max(d.scrollWidth,d.clientWidth,h?h.scrollWidth:0,h?h.clientWidth:0),b=Math.max(d.scrollHeight,d.clientHeight,h?h.scrollHeight:0,h?h.clientHeight:0),E=-p.scrollLeft+w(u),L=-p.scrollTop,"rtl"===x(h||d).direction&&(E+=Math.max(d.clientWidth,h?h.clientWidth:0)-v),{width:v,height:b,x:E,y:L}))}function et(){return{top:0,right:0,bottom:0,left:0}}function en(e,t){void 0===t&&(t={});var n,i,r,o,a,s,l,c,u=t,d=u.placement,p=void 0===d?e.placement:d,h=u.boundary,g=u.rootBoundary,w=u.elementContext,E=void 0===w?I:w,L=u.altBoundary,C=u.padding,T=void 0===C?0:C,M=(n="number"!=typeof T?T:z.reduce(function(e,t){return e[t]=T,e},{}),Object.assign(Object.assign({},et()),n)),O=e.elements.reference,R=e.rects.popper,U=e.elements[void 0!==L&&L?E===I?"reference":I:E],j=(i=v(U)?U:U.contextElement||k(e.elements.popper),l=(s=[].concat("clippingParents"===(r=void 0===h?"clippingParents":h)?(o=S(A(i)),v(a=["absolute","fixed"].indexOf(x(i).position)>=0&&y(i)?F(i):i)?o.filter(function(e){return v(e)&&function(e,t){var n,i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n=m(i).ShadowRoot,i instanceof n||i instanceof ShadowRoot){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}(e,a)&&"body"!==b(e)}):[]):[].concat(r),[void 0===g?D:g]))[0],(c=s.reduce(function(e,t){var n=ee(i,t);return e.top=Math.max(n.top,e.top),e.right=Math.min(n.right,e.right),e.bottom=Math.min(n.bottom,e.bottom),e.left=Math.max(n.left,e.left),e},ee(i,l))).width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c),N=f(O),q=Q({reference:N,element:R,strategy:"absolute",placement:p}),P=J(Object.assign(Object.assign({},R),q)),H=E===I?P:N,B={top:j.top-H.top+M.top,bottom:H.bottom-j.bottom+M.bottom,left:j.left-H.left+M.left,right:H.right-j.right+M.right},W=e.modifiersData.offset;if(E===I&&W){var Y=W[p];Object.keys(B).forEach(function(e){var t=[$,_].indexOf(e)>=0?1:-1,n=["top",_].indexOf(e)>=0?"y":"x";B[e]+=Y[n]*t})}return B}function ei(e,t,n){return Math.max(e,Math.min(t,n))}let er=(a=void 0===(o=(r={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,l=m(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",n.update,P)}),s&&l.addEventListener("resize",n.update,P),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",n.update,P)}),s&&l.removeEventListener("resize",n.update,P)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Q({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=n.adaptive,o={placement:H(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===i||i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),K(Object.assign(Object.assign({},o),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===r||r})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),K(Object.assign(Object.assign({},o),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];y(r)&&b(r)&&(Object.assign(r.style,n),Object.keys(i).forEach(function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});y(i)&&b(i)&&(Object.assign(i.style,o),Object.keys(r).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=H(g)===g,y=l||(v||!f?[G(g)]:function(e){if(H(e)===M)return[];var t=G(e);return[Z(e),t,Z(t)]}(g)),b=[g].concat(y).reduce(function(e,n){var i,r,o,a,s,l,p,h,g,v,y,b;return e.concat(H(n)===M?(r=(i={placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}).placement,o=i.boundary,a=i.rootBoundary,s=i.padding,l=i.flipVariations,h=void 0===(p=i.allowedAutoPlacements)?U:p,0===(y=(v=(g=B(r))?l?R:R.filter(function(e){return B(e)===g}):z).filter(function(e){return h.indexOf(e)>=0})).length&&(y=v),Object.keys(b=y.reduce(function(e,n){return e[n]=en(t,{placement:n,boundary:o,rootBoundary:a,padding:s})[H(n)],e},{})).sort(function(e,t){return b[e]-b[t]})):n)},[]),k=t.rects.reference,w=t.rects.popper,x=new Map,E=!0,L=b[0],A=0;A<b.length;A++){var S=b[A],C=H(S),F=B(S)===O,D=["top",_].indexOf(C)>=0,I=D?"width":"height",j=en(t,{placement:S,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),N=D?F?$:T:F?_:"top";k[I]>w[I]&&(N=G(N));var q=G(N),P=[];if(o&&P.push(j[C]<=0),s&&P.push(j[N]<=0,j[q]<=0),P.every(function(e){return e})){L=S,E=!1;break}x.set(S,P)}if(E)for(var W=f?3:1,Q=function(e){var t=b.find(function(t){var n=x.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return L=t,"break"},Y=W;Y>0&&"break"!==Q(Y);Y--);t.placement!==L&&(t.modifiersData[i]._skip=!0,t.placement=L,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=n.altAxis,a=n.boundary,s=n.rootBoundary,l=n.altBoundary,c=n.padding,u=n.tether,d=void 0===u||u,p=n.tetherOffset,h=void 0===p?0:p,f=en(t,{boundary:a,rootBoundary:s,padding:c,altBoundary:l}),m=H(t.placement),g=B(t.placement),v=!g,y=W(m),b="x"===y?"y":"x",k=t.modifiersData.popperOffsets,w=t.rects.reference,x=t.rects.popper,E="function"==typeof h?h(Object.assign(Object.assign({},t.rects),{},{placement:t.placement})):h,A={x:0,y:0};if(k){if(void 0===r||r){var S="y"===y?"top":T,C="y"===y?_:$,M="y"===y?"height":"width",z=k[y],D=k[y]+f[S],I=k[y]-f[C],R=d?-x[M]/2:0,U=g===O?w[M]:x[M],j=g===O?-x[M]:-w[M],N=t.elements.arrow,q=d&&N?L(N):{width:0,height:0},P=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:et(),Q=P[S],Y=P[C],K=ei(0,w[M],q[M]),X=v?w[M]/2-R-K-Q-E:U-K-Q-E,G=v?-w[M]/2+R+K+Y+E:j+K+Y+E,V=t.elements.arrow&&F(t.elements.arrow),Z=V?"y"===y?V.clientTop||0:V.clientLeft||0:0,J=t.modifiersData.offset?t.modifiersData.offset[t.placement][y]:0,ee=k[y]+X-J-Z,er=k[y]+G-J,eo=ei(d?Math.min(D,ee):D,z,d?Math.max(I,er):I);k[y]=eo,A[y]=eo-z}if(void 0!==o&&o){var ea="x"===y?"top":T,es="x"===y?_:$,el=k[b],ec=el+f[ea],eu=el-f[es],ed=ei(ec,el,eu);k[b]=ed,A[b]=ed-el}t.modifiersData[i]=A}},requiresIfExists:["offset"]}]}).defaultModifiers)?[]:o,l=void 0===(s=r.defaultOptions)?N:s,function(e,t,n){void 0===n&&(n=l);var i,r={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},N),l),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,c={state:r,setOptions:function(n){u(),r.options=Object.assign(Object.assign(Object.assign({},l),r.options),n),r.scrollParents={reference:v(e)?S(e):e.contextElement?S(e.contextElement):[],popper:S(t)};var i,s,d,p,h,f=(s=Object.keys(i=[].concat(a,r.options.modifiers).reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e},{})).map(function(e){return i[e]}),d=new Map,p=new Set,h=[],s.forEach(function(e){d.set(e.name,e)}),s.forEach(function(e){p.has(e.name)||function e(t){p.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!p.has(t)){var n=d.get(t);n&&e(n)}}),h.push(t)}(e)}),j.reduce(function(e,t){return e.concat(h.filter(function(e){return e.phase===t}))},[]));return r.orderedModifiers=f.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,i=e.effect;if("function"==typeof i){var a=i({state:r,name:t,instance:c,options:void 0===n?{}:n});o.push(a||function(){})}}),c.update()},forceUpdate:function(){if(!s){var e=r.elements,t=e.reference,n=e.popper;if(q(t,n)){r.rects={reference:(o=F(n),a="fixed"===r.options.strategy,l=k(o),u=f(t),d=y(o),p={scrollLeft:0,scrollTop:0},h={x:0,y:0},(d||!d&&!a)&&(("body"!==b(o)||E(l))&&(p=(i=o)!==m(i)&&y(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:g(i)),y(o)?(h=f(o),h.x+=o.clientLeft,h.y+=o.clientTop):l&&(h.x=w(l))),{x:u.left+p.scrollLeft-h.x,y:u.top+p.scrollTop-h.y,width:u.width,height:u.height}),popper:L(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var i,o,a,l,u,d,p,h,v=0;v<r.orderedModifiers.length;v++){if(!0===r.reset){r.reset=!1,v=-1;continue}var x=r.orderedModifiers[v],A=x.fn,S=x.options,C=void 0===S?{}:S,_=x.name;"function"==typeof A&&(r=A({state:r,options:C,name:_,instance:c})||r)}}}},update:function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(new Promise(function(e){c.forceUpdate(),e(r)}))})})),i},destroy:function(){u(),s=!0}};if(!q(e,t))return c;function u(){o.forEach(function(e){return e()}),o=[]}return c.setOptions(n).then(function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)}),c});function eo(e){return/^[A-Za-z0-9 #&@()_+=':%/",.!?*~`[\]{}<>^;\\|-]+$/g.test(e.split(/[\r\n]+/).join())}function ea(e){let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}function es(e,t,n){let i=RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+n+"$2"):e+r+t+"="+n}let el={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ec(e){return String(e).replace(/[&<>"']/g,function(e){return el[e]})}let eu=0;function ed(e){return new Promise(t=>setTimeout(t,e))}async function ep(e,t="default",n=1800,i=!1){if(eu>5)return;let r=document.querySelector(".toast-holder"),o=n+1e3*eu,a=ea(`
        <div role="alert" aria-live="assertive" aria-atomic="true" class="toast fade showing">
            <div class="toast-body ${t}">
                <div class="toast-content">
                    <span>${e}</span>
                    ${i?`<button type="button" class="ml-2 close" data-dismiss="toast" aria-label="${gettext("Close")}"><span aria-hidden="true">&times;</span></button>`:""}
                </div>
            </div>
        </div>`);r.prepend(a),i&&a.addEventListener("click",async e=>{e.target.closest("[data-dismiss=toast]")&&(a.classList.remove("show"),await ed(100),a.remove())}),await ed(50),a.classList.add("show"),i||(eu+=1,await ed(o),a.classList.remove("show"),eu-=1,await ed(100),a.remove())}function eh(e,t=!1,n=gettext("something went wrong")){let r={method:"POST",headers:new Headers({"Content-Type":"application/json","X-CSRFToken":i(h).get("csrftoken")}),mode:"same-origin",body:JSON.stringify(e)},o=()=>(t||ep(n,"error"),{errors:[n]});return fetch("/graphql/",r).then(e=>e.ok?e.json():o()).catch(()=>o())}let ef=i(h).withConverter({read:e=>decodeURIComponent(e),write:e=>encodeURIComponent(e)}).withAttributes({sameSite:"Lax"});function em(e,t,n){e.textContent=e.textContent===n?t:n}let eg=document.querySelectorAll.bind(document),ev=document.querySelector.bind(document),ey=e=>"string"==typeof e||e instanceof String;function eb(e,t,n,...i){ey(e)&&(e=ev(e)),e&&e.addEventListener(t,n,...i)}function ek(e,t,n,...i){ey(e)&&(e=eg(e)),e.forEach(e=>{e.addEventListener(t,n,...i)})}let ew="au"===ev("body").id,ex=document.documentElement.lang;class eE{suggest(e){if(this.cache){if(this.emptyResults.filter(t=>e.startsWith(Object.keys(t)[0])).length){this.render([]);return}let[t]=this.cachedResults.filter(t=>t[e]);if(t){this.render(t[e]);return}}this.lookup(e).then(t=>{let n=t.map(t=>({name:this.highlight?function(e,t){if(!t)return ec(e);let n="("+t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")+")";return ec(e.replace(RegExp(n,"gi"),"<mark>$1</mark>")).replace(/&lt;(\/?mark)&gt;/g,"<$1>")}(t.name,e):ec(t.name),value:ec(t.value)}));this.cache&&"@"!==e&&(n.length?this.cachedResults:this.emptyResults).push({[e]:n}),this.render(n)})}render(e){if(this.popper||(this.popper=this.create()),e.length)for(let[t,n]of(this.template.innerHTML="",e.entries()))this.template.innerHTML+=`<li role="option" data-value="${n.value}" id="cb-opt-${t}">${n.name}</li>`;else{if(this.silent){this.destroy();return}this.template.querySelector(".no-results")||(this.template.innerHTML=`<li role="alert" aria-live="assertive" class='no-results'>${this.noResultsMessage}</li>`)}this.showing=!0,this.template.style.display="block",this.input.setAttribute("aria-expanded","true")}destroy(){this.popper&&(this.input.setAttribute("aria-expanded","false"),this.template.style.display="none",this.template.innerHTML="",this.selected=null,this.showing=!1,this.popper.destroy(),this.popper=null)}create(){return er(this.input,this.template,{placement:"bottom-start"})}triggerOnSelect(e){if(e.classList.contains("no-results"))return;this.destroy(),this.input.value=e.textContent;let t=e.getAttribute("data-value");t&&this.onSelect&&this.onSelect(t)}constructor(e){this.input=e.input,this.lookup=e.lookup,this.onSelect=e.onSelect,this.silent=!0===e.silent,this.highlight=e.highlight,this.noResultsMessage=e.noResultsMessage||gettext("-- no corresponding results --"),this.cache=!0===e.cache,this.cachedResults=[],this.emptyResults=[],this.popper=null,this.selected=null,this.showing=!1;let t=`id_${this.input.id}`;this.template=ea(`<ul role="listbox" class="autocomplete" id="${t}"></ul>`),this.input.parentNode.append(this.template),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("role","combobox"),this.input.setAttribute("aria-owns",t),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-expanded","false"),this.input.addEventListener("input",()=>{let e=this.input.value.toLocaleLowerCase(ex).trim();this.selected=null,e?this.suggest(e):this.showing&&this.destroy()}),this.input.addEventListener("focusout",()=>{setTimeout(()=>{this.destroy()},200)}),this.input.addEventListener("keydown",e=>{if(!["ArrowUp","ArrowDown","Escape","Enter","Tab"].includes(e.key))return;let t=["ArrowUp","ArrowDown"].includes(e.key);switch(t&&this.selected&&this.selected.classList.remove("selected","mouseover"),e.key){case"ArrowUp":{let t=this.template.lastChild;this.selected=this.selected&&this.selected.previousElementSibling||t,this.selected.classList.contains("no-results")||e.preventDefault();break}case"ArrowDown":{let e=this.template.firstChild;this.selected=this.selected&&this.selected.nextElementSibling||e;break}case"Escape":this.destroy();break;case"Enter":this.selected&&!this.selected.classList.contains("mouseover")&&(e.preventDefault(),this.triggerOnSelect(this.selected));break;case"Tab":this.selected&&!e.shiftKey&&(this.input.value=this.selected.textContent)}t&&this.selected&&!this.selected.classList.contains("no-results")&&(this.selected.classList.add("selected"),this.input.value=this.selected.textContent,this.input.setAttribute("aria-activedescendant",this.selected.id))}),this.template.addEventListener("click",e=>{e.stopPropagation(),this.triggerOnSelect(e.target.closest("li"))}),this.template.addEventListener("mouseover",e=>{"LI"!==e.target.tagName||e.target.classList.contains("no-results")||(Array.from(this.template.childNodes).forEach(t=>t!==e.target&&t.classList.remove("selected","mouseover")),this.selected=e.target,this.selected.classList.add("selected","mouseover"))})}}let eL="query($lookup:String!){autocomplete{authors(lookup:$lookup){username}}}";function eA(e){return eh({query:eL,variables:{lookup:e.substr(1)}}).then(e=>e.data.autocomplete.authors.map(e=>({name:`@${e.username}`,value:`@${e.username}`})))}function eS(e){return e.startsWith("@")&&e.substr(1)?eA(e):eh({query:"query($lookup:String!){autocomplete{authors(lookup:$lookup,limit:3){username}topics(lookup:$lookup,limit:7){title}}}",variables:{lookup:e}}).then(e=>{let t=e.data.autocomplete.topics.map(e=>({name:e.title,value:e.title})),n=e.data.autocomplete.authors.map(e=>({name:`@${e.username}`,value:`@${e.username}`}));return t.concat(n)})}new eE({input:ev("#header_search"),highlight:!0,cache:!0,lookup:eS,onSelect(e){window.location="/topic/?q="+encodeURIComponent(e)}});let eC=ev("#editor_input");eC&&new eE({input:eC,silent:!0,highlight:!0,cache:!0,lookup:eS});let eF=ev("#in_topic_search");eF&&new eE({input:eF,silent:!0,highlight:!0,cache:!0,lookup:e=>e.startsWith("@")&&e.substr(1)?eA(e):new Promise(e=>e),onSelect(){eF.closest("form").submit()}}),eg(".author-search").forEach(e=>{new eE({input:e,highlight:!0,cache:!0,lookup:e=>eh({query:eL,variables:{lookup:e}}).then(e=>e.data.autocomplete.authors.map(e=>({name:e.username,value:e.username})))})});let e_=ev("#user_title_edit");e_&&new eE({input:e_,highlight:!0,cache:!0,lookup:e=>eh({query:"query($lookup:String!){autocomplete{topics(lookup:$lookup,limit:7){title}}}",variables:{lookup:e}}).then(e=>e.data.autocomplete.topics.map(e=>({name:e.title,value:e.title})))});let e$='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',eT=null;class eM{create(){let e=this.menuElement.getAttribute("data-orientation")||"bottom-end";return eT&&eT.destroy(),eT=this,er(this.button,this.menuElement,{placement:e,modifiers:[{name:"offset",options:{offset:[0,1]}}]})}async toggle(){if(await ed(0),"block"===this.menuElement.style.display){this.destroy();return}this.popper||(this.popper=this.create()),this.menuElement.style.display="block",this.button.setAttribute("aria-expanded","true")}destroy(){this.menuElement.style.display="none",this.button.setAttribute("aria-expanded","false"),this.popper&&(this.popper.destroy(),this.popper=null,eT=null)}constructor(e){this.button=e,this.menuElement=e.parentNode.querySelector(".dropdown-menu"),this.popper=null,this.menuElement.addEventListener("keydown",e=>{if(!(!["ArrowUp","ArrowDown"].includes(e.key)||this.menuElement.classList.contains("no-arrows")))switch(e.preventDefault(),e.key){case"ArrowDown":{let t=function e(t){return t.nextElementSibling?t.nextElementSibling.matches(e$)?t.nextElementSibling:e(t.nextElementSibling):null}(e.target);t?t.focus():this.menuElement.querySelector(e$).focus();break}case"ArrowUp":{let t=function e(t){return t.previousElementSibling?t.previousElementSibling.matches(e$)?t.previousElementSibling:e(t.previousElementSibling):null}(e.target);if(t)t.focus();else{let e=this.menuElement.querySelectorAll(e$);e[e.length-1].focus()}}}})}}ek("[data-toggle=dropdown]","click",function(){this._dropdownInstance||(this._dropdownInstance=new eM(this)),this._dropdownInstance.toggle()}),ek("[data-toggle=dropdown]","keydown",function(e){if("ArrowDown"===e.key){if(e.preventDefault(),this._dropdownInstance&&this._dropdownInstance.popper){let e=this._dropdownInstance.menuElement.querySelector(e$);e&&e.focus();return}this.dispatchEvent(new Event("click"))}}),eb(document,"mousedown",t=>{e=t.target}),eb(document,"mouseup",()=>{e=null}),ek("[data-toggle=dropdown]","blur",function(t){let n=this._dropdownInstance;if(!n)return;let i=e&&e.closest(".dropdown-menu")===n.menuElement;t.relatedTarget&&t.relatedTarget.closest(".dropdown-menu")===n.menuElement||i||n.destroy()}),eb(document,"focusin",e=>{e.target.matches("[data-toggle=dropdown]")||!eT||e.target.closest(".dropdown-menu")||eT.destroy()}),eb(document,"keydown",e=>{if("Escape"===e.key){if(eT)eT.destroy();else{let e=ev(".modal.show");e&&e._modalInstance.hide()}}}),eb(document,"click",e=>{let t=eT;if(t){let n=t.menuElement.classList.contains("no-collapse")&&t.menuElement===e.target.closest(".dropdown-menu");(e.target.classList.contains("dropdown-close")||t.button!==e.target.closest("[data-toggle=dropdown]")&&!n)&&t.destroy()}});class ez{show(e){this.returnTo=e,this.showing=!0,this.modal.removeAttribute("aria-hidden"),this.modal.classList.add("showing"),this.modal.style.display="block",setTimeout(()=>{this.modal.classList.add("show"),this.lead.focus()},0)}hide(){if(!this.showing)return!1;let e=this.modal;e.classList.remove("show"),new Promise(t=>{e.addEventListener("transitionend",function n(i){i.target===e&&t(n)})}).then(t=>{e.removeEventListener("transitionend",t),e.style.display="none",e.classList.remove("showing"),e.setAttribute("aria-hidden","true"),this.returnTo&&this.returnTo.focus()})}constructor(e){this.modal=e,this.showing=!1,this.lead=e.querySelector(".lead"),e.addEventListener("click",e=>{(!e.target.closest(".modal-content")||e.target.closest("[data-dismiss=modal]"))&&this.hide()});let t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1];e.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===n&&(i.focus(),e.preventDefault()):document.activeElement===i&&(n.focus(),e.preventDefault()))})}}eg(".modal[role=dialog]").forEach(e=>{e._modalInstance=new ez(e)});let eO=matchMedia("(hover: none)").matches,eD=!1,eI=0,eR=!1,eU=ea(`<a role="button" tabindex="0" class="bg-light rounded border-0 w-100 p-2 d-none scrolltop text-center" style="display: block">${gettext("scroll to top")}</a>`);function ej(){let e=window.pageYOffset,t=ev("header.page_header"),n=ev(".sub-nav");if(e<0&&(e=0),e>0&&eU.classList.remove("d-none"),30>=Math.abs(eI-e))return;let i=()=>{n.style.marginTop="0",t.style.top="0"};e>eI?(n.style.marginTop=".75em",t.style.top="-55px",t.addEventListener("mouseover",i,{once:!0})):i(),eI=e}eb(eU,"click",function(){window.scrollTo(0,0),this.classList.add("d-none")});let eN=window.matchMedia("(max-width: 810px)"),eq=e=>{eg("a[data-sup]").forEach(t=>{e?t.innerHTML=`<sup>${ec(t.getAttribute("data-sup"))}</sup>`:t.innerHTML="*"})};function eP(e){e.matches?function(){if(eD=!0,window.addEventListener("scroll",ej),eq(!0),!eR){let e=ev("footer.body-footer");e.parentNode.insertBefore(eU,e),eR=!0}}():(eD=!1,parseInt(localStorage.getItem("where"),10)>0&&ev("#left-frame-nav").scroll(0,localStorage.getItem("where")),window.removeEventListener("scroll",ej),ev(".sub-nav").style.marginTop="0",ev("header.page_header").style.top="0",eO?eq(!0):eq(!1),eR&&(eU.remove(),eR=!1))}function eH(e){let t=ev("body"),n=ev("[data-toggle=theme]").querySelector("use");t.style.transition="background-color .5s ease","dark"===e?(t.classList.add("dark"),n.setAttribute("href","#sun")):(t.classList.remove("dark"),n.setAttribute("href","#moon"))}eN.addListener(eP),document.addEventListener("DOMContentLoaded",()=>{eP(eN);let e=ev("#request-messages");if("true"===e.getAttribute("data-has-messages")){let t=2e3;e.childNodes.forEach(e=>{let n=e.getAttribute("data-extra").includes("persistent");ep(e.getAttribute("data-message"),e.getAttribute("data-level"),t,n),t+=1e3})}}),eb("[data-toggle=theme]","click",function(){ew?eh({query:"mutation{user{toggleTheme{theme}}}"}).then(e=>{eH(e.data.user.toggleTheme.theme)}):"dark"===ef.get("theme")?(ef.set("theme","light",{expires:90}),eH("light")):(ef.set("theme","dark",{expires:90}),eH("dark"))}),ew||ef.get("theme")||!window.matchMedia("(prefers-color-scheme: dark)").matches||(ef.set("theme","dark",{expires:90}),eH("dark")),eb("body","change",e=>{e.target.matches("select.page-selector")&&(window.location=es(location.href,"page",e.target.value))}),eb("body",eO?"touchstart":"focusin",e=>{let t=e.target;if(t.matches("select.page-selector")&&!t.hasAttribute("data-loaded")){let e=parseInt(t.getAttribute("data-max"),10),n=parseInt(t.value,10);t.firstElementChild.remove();for(let i=1;i<=e;i++){let e=ea(`<option ${i===n?"selected":""}>${i}</option>`);t.append(e)}t.setAttribute("data-loaded","")}}),eb("form.search_mobile, form.reporting-form","submit",function(){return Array.from(this.querySelectorAll("input")).filter(e=>"checkbox"===e.type&&!e.checked||""===e.value).forEach(e=>{e.disabled=!0}),!1}),ek("[data-toggle=collapse]","click",function(){this.closest("div").parentNode.querySelector(".collapse").classList.toggle("show"),"false"===this.getAttribute("aria-expanded")?this.setAttribute("aria-expanded","true"):this.setAttribute("aria-expanded","false")}),eb("body","keypress",e=>{e.target.matches("[role=button], .key-clickable")&&(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),e.target.dispatchEvent(new Event("click",{bubbles:!0})))}),eb(".content-skipper","click",function(){location.replace(this.getAttribute("data-href"))}),ek("input.is-invalid","input",function(){this.classList.remove("is-invalid")}),ek("textarea.expandable","focus",function(){this.style.height=`${this.offsetHeight+150}px`,eb(this,"transitionend",()=>{this.style.transition="none"})},{once:!0});let eB={"":'"',"":'"',"":"'","":"'",:"^"};function eW(e){return String(e).replace(/[\u201C\u201D\u2018\u2019\u02C6]/g,function(e){return eB[e]})}function eQ(e){let t=[];return e.forEach(e=>{t.push(e.getAttribute("data-id"))}),t}function eY(e){let t=e.closest("li.chat");return t||(t=e.parentNode),t}function eK(e,t){return eh({query:"mutation($pkSet:[ID!]!, $mode:String){message{deleteConversation(pkSet:$pkSet,mode:$mode){redirect}}}",variables:{pkSet:e,mode:t}})}function eX(e){return eh({query:"mutation($pkSet:[ID!]!){message{archiveConversation(pkSet:$pkSet){redirect}}}",variables:{pkSet:e}})}ek("textarea#user_content_edit, textarea#message-body","input",function(){window.onbeforeunload=()=>this.value||null,this.value=eW(this.value)}),ek("textarea.normalize","input",function(){this.value=eW(this.value)}),ek("form","submit",function(e){window.onbeforeunload=null,"header_search_form"!==this.id||new FormData(this).get("q").trim()||(e.preventDefault(),window.location="/threads/search/");let t=this.querySelector("#user_content_edit");if(t&&t.value&&!eo(t.value))return ep(gettext("this content includes forbidden characters."),"error"),window.onbeforeunload=()=>!0,e.preventDefault(),!1}),ek("button.follow-category-trigger","click",function(){var e;(e=this.getAttribute("data-category-id"),eh({query:`mutation{category{follow(pk:"${e}"){feedback}}}`})).then(()=>{em(this,pgettext("category-list","unfollow"),pgettext("category-list","follow")),this.classList.toggle("faded")})}),eb("a#message_history_show","click",function(){eg("ul#message_list li.bubble").forEach(e=>{e.style.display="list-item"}),this.classList.add("dj-hidden")}),eb("a[role=button].chat-reverse","click",()=>{eg("input.chat-selector").forEach(e=>{e.checked=!e.checked,e.dispatchEvent(new Event("change"))})}),ek("input.chat-selector","change",function(){this.closest("li.chat").classList.toggle("selected")}),ek("a[role=button].chat-delete-individual","click",function(){if(!confirm(gettext("are you sure to delete?")))return!1;let e=eY(this),t=(ev("ul.threads")||e).getAttribute("data-mode");eK(e.getAttribute("data-id"),t).then(t=>{let n=t.data.message.deleteConversation;n&&(eg("li.chat").length>1?(e.remove(),ep(gettext("deleted conversation"))):window.location=n.redirect)})}),eb("a[role=button].chat-delete","click",()=>{let e=eg("li.chat.selected");if(e.length){if(!confirm(gettext("are you sure to delete all selected conversations?")))return!1;eK(eQ(e),ev("ul.threads").getAttribute("data-mode")).then(e=>{let t=e.data.message.deleteConversation;t&&(window.location=t.redirect)})}else ep(gettext("you need to select at least one conversation to delete"),"error")}),eb("a[role=button].chat-archive","click",()=>{let e=eg("li.chat.selected");if(e.length){if(!confirm(gettext("are you sure to archive all selected conversations?")))return!1;eX(eQ(e)).then(e=>{let t=e.data.message.archiveConversation;t&&(window.location=t.redirect)})}else ep(gettext("you need to select at least one conversation to archive"),"error")}),ek("a[role=button].chat-archive-individual","click",function(){if(!confirm(gettext("are you sure to archive?")))return!1;let e=eY(this);eX(e.getAttribute("data-id")).then(t=>{let n=t.data.message.archiveConversation;n&&(eg("li.chat").length>1?(e.remove(),ep(gettext("archived conversation"))):window.location=n.redirect)})}),eg("#message_list time[data-id]").forEach(e=>{e.parentNode.append(ea(`<div data-orientation="bottom" class="dropdown-menu"><a role="button" tabindex="0" class="dropdown-item">${gettext("delete")}</a></div>`))}),ek("#message_list .dropdown-menu","click",function(e){e.target.classList.contains("dropdown-item")&&confirm(gettext("Are you sure?"))&&eh({variables:{pk:this.parentNode.querySelector("time[data-id]").getAttribute("data-id")},query:"mutation($pk:ID!){message{delete(pk:$pk){immediate}}}"}).then(e=>{if(!e.errors){if(this.closest("li.bubble").remove(),!document.querySelector("li.bubble")){window.location=location;return}"true"===e.data.message.delete.immediate&&ep(gettext("hopefully they didn't see that one."),"info")}})});let eG=()=>{ep(gettext("image could not be displayed. it might have been deleted."),"error",2200)};function eV(e){return eh({query:"mutation($slug:String!){image{delete(slug:$slug){feedback}}}",variables:{slug:e}})}eb(document,"click",e=>{let t=e.target;if(t.matches(".entry a[data-img], .text-formatted a[data-img]")){if(t.hasAttribute("data-broken")){eG();return}if(t.hasAttribute("data-loaded"))t.nextElementSibling.classList.toggle("d-none"),t.nextElementSibling.nextElementSibling.classList.toggle("d-none"),"true"===t.getAttribute("aria-expanded")?t.setAttribute("aria-expanded","false"):t.setAttribute("aria-expanded","true");else{let e=t.parentNode;e.style.maxHeight="none";let n=e.querySelector(".read_more");n&&(n.style.display="none");let i=t.getAttribute("data-img"),r=ea(`<img src="${i}" alt="${gettext("image")}" class="img-thumbnail img-fluid" draggable="false">`),o=ea(`<a rel="ugc nofollow noopener" title="${gettext("open full image in new tab")}" href="${i}" target="_blank" class="ml-3 position-relative" style="top: 2px;"></a>`);r.onerror=()=>{eG(),r.style.display="none",o.style.display="none",t.setAttribute("data-broken","true")},t.after(o),o.after(r),t.setAttribute("aria-expanded","true")}t.setAttribute("data-loaded","true")}}),ek("a[role=button].delete-image","click",function(){if(confirm(gettext("Are you sure?"))){let e=this.closest(".image-detail");eV(e.getAttribute("data-slug")),e.remove()}});var eZ=p("iS9jW");function eJ(e,t){let n=e.selectionStart;if(n){let i=e.selectionEnd,r=e.scrollTop;e.value=e.value.substring(0,n)+t+e.value.substring(i,e.value.length),e.focus(),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.scrollTop=r}else e.value+=t,e.focus()}function e0(e){let t;switch(e){case"ref":t=[gettext("target topic, #entry or @author to reference:"),e=>`(${pgettext("editor","see")}: ${e})`];break;case"thingy":t=[gettext("target topic, #entry or @author to thingy:"),e=>`\`${e}\``];break;case"swh":t=[gettext("what should be referenced in asterisk?"),e=>`\`:${e}\``];break;case"spoiler":{let e=gettext("spoiler");t=[gettext("what to write between spoiler tags?"),t=>`--\`${e}\`--
${t}
--\`${e}\`--`]}}return{label:t[0],format:t[1]}}function e1(e,t){let n=e.selectionStart,i=e.selectionEnd,r=e.value,o=r.substring(n,i);if(!o)return!1;if("link"===t){let t=prompt(gettext("which address to link?"),"http://");t&&"http://"!==t&&(e.value=r.substring(0,n)+`[${t} ${o}]`+r.substring(i,r.length))}else e.value=r.substring(0,n)+e0(t).format(o)+r.substring(i,r.length);return e.focus(),!0}let e2=ev("#editor_done"),e4=ev("#editor_input"),e5=ev("#editorModal");e5&&(n=e5.querySelector("label"));let e3=ev("#user_content_edit"),e6=ev(".dropzone");function e7(e,t,n=null,i=!0){return eh({query:`mutation{user{${e}(username:"${t}"){feedback redirect}}}`}).then(function(t){let r=t.data.user[e];i&&(n||r.redirect)?window.location=n||r.redirect:ep(r.feedback)})}function e9(e,t=!0,n=null){let i=ev("#block_user");i.setAttribute("data-username",e),i.setAttribute("data-re",t),ev("#username-holder").textContent=e,ev("#blockUserModal")._modalInstance.show(n)}function e8(e,t,n=null){let i=ev("#sendMessageModal");ev("#sendMessageModal span.username").textContent=e,t&&(ev("#sendMessageModal textarea#message_body").value=t),i.setAttribute("data-for",e),i._modalInstance.show(n)}function te(e,t,n=!1){return eh({query:`mutation{entry{${e}(pk:"${t}"){feedback ${n?"redirect":""}}}}`})}eb("button#insert_image","click",()=>{e6.style.display="none"===e6.style.display?"":"none"}),eb("button#insert_link","click",()=>{if(!e1(e3,"link")){let e=prompt(gettext("which address to link?"),"http://");if(e&&"http://"!==e){let t=prompt(gettext("alias for the link?"));eJ(e3,t?`[${e} ${t}]`:e)}}}),eb(e2,"click",()=>{e4.value.trim()&&eJ(e3,t.format(e4.value.trim()))}),eb(e4,"keydown",e=>{"Enter"===e.key&&e2.dispatchEvent(new Event("click",{bubbles:!0}))}),ek("button.insert","click",function(){let e=this.getAttribute("data-type");e1(e3,e)||(t=e0(e),n.textContent=t.label,e4.value="",e5._modalInstance.show(null))}),i(eZ).options.userImageUpload={addRemoveLinks:!0,paramName:"file",maxFilesize:2.5,acceptedFiles:"image/*",maxFiles:10,dictRemoveFileConfirmation:gettext("Are you sure?"),dictDefaultMessage:gettext("click or drop files here to upload"),dictRemoveFile:gettext("delete image"),dictFileTooBig:gettext("File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB."),dictMaxFilesExceeded:gettext("You can not upload any more files."),dictUploadCanceled:gettext("Upload canceled."),dictCancelUploadConfirmation:gettext("Are you sure?"),success(e,t){eJ(e3,`(${pgettext("editor","image")}: ${t.slug})`)},removedfile(e){e.previewElement.remove();let t=JSON.parse(e.xhr.response).slug;e3.value=e3.value.replace(RegExp(`\\(${pgettext("editor","image")}: ${t}\\)`,"g"),""),eV(t)}},ek(".block-user-trigger","click",function(){let e=this.classList.contains("sync"),t=this.getAttribute("data-username");if(e)return e7("block",t,location);e7("block",t,null,!1).then((function(){em(this,gettext("remove block"),gettext("block this guy"))}).bind(this))}),ek(".follow-user-trigger","click",function(){e7("follow",this.parentNode.getAttribute("data-username")),em(this.querySelector("a"),gettext("follow"),gettext("unfollow"))}),eb("ul.user-links","click",function(e){let t=this.getAttribute("data-username");e.target.matches("li.block-user a")?e9(t,!0,e.target):e.target.matches("li.send-message a")&&e8(t,null,e.target)}),eb("#block_user","click",function(){let e=this.getAttribute("data-username"),t="true"===this.getAttribute("data-re");t||eg(".entry-full").forEach(t=>{t.querySelector(".meta .username").textContent===e&&t.remove()}),e7("block",e,null,t)}),eb("#send_message_btn","click",function(){let e=ev("#sendMessageModal textarea"),t=ev("#sendMessageModal"),n=e.value;if(n.length<3){ep(gettext("if only you could write down something"),"error");return}if(!eo(n)){ep(gettext("this content includes forbidden characters."),"error");return}this.disabled=!0,eh({query:"mutation compose($body:String!,$recipient:String!){message{compose(body:$body,recipient:$recipient){feedback}}}",variables:{recipient:t.getAttribute("data-for"),body:n}}).then(function(e){ep(e.data.message.compose.feedback)}).then(()=>{t._modalInstance.hide(),e.value=""}).finally(()=>{this.disabled=!1})}),ek("a.favorite[role='button']","click",function(){let e=this.closest(".entry-full").getAttribute("data-id");eh({query:`mutation{entry{favorite(pk:"${e}"){feedback count}}}`}).then(e=>{let t=e.data.entry.favorite.count,n=this.nextElementSibling;this.classList.toggle("active"),0===t?(n.textContent="",n.setAttribute("tabindex","-1")):(n.textContent=t,n.setAttribute("tabindex","0")),this.parentNode.querySelector("span.favorites-list").setAttribute("data-loaded","false")})}),ek("a.fav-count[role='button']","click",function(){let e=this.nextElementSibling;if("true"===e.getAttribute("data-loaded"))return;e.innerHTML="<div class='px-3 py-1'><div class='spinning'><span style='font-size: 1.25em'>&orarr;</span></div></div>";let t=this.closest(".entry-full").getAttribute("data-id");eh({query:`{entry{favoriters(pk:${t}){username slug isNovice}}}`}).then(t=>{let n=t.data.entry.favoriters,i=n.filter(e=>!1===e.isNovice),r=n.filter(e=>!0===e.isNovice);if(e.innerHTML="",e.setAttribute("data-loaded","true"),!n.length){e.innerHTML=`<span class='p-2'>${gettext("actually, nothing here.")}</span>`;return}let o="";if(i.length>0&&(i.forEach(e=>{o+=`<a class="author" href="/author/${e.slug}/">@${e.username}</a>`}),e.innerHTML=o),r.length>0){let t=interpolate(ngettext("... %(count)s novice","... %(count)s novices",r.length),{count:r.length},!0),n=ea(`<a role="button" tabindex="0">${t}</a>`),i=ea('<span class="dj-hidden"></span>');e.append(n),n.addEventListener("click",()=>{i.classList.toggle("dj-hidden")}),o="",r.forEach(e=>{o+=`<a class="novice" href="/author/${e.slug}/">@${e.username}</a>`}),i.innerHTML=o,e.append(i)}})}),ek("a.twitter[role='button'], a.facebook[role='button']","click",function(){let e=this.classList.contains("twitter")?"https://twitter.com/intent/tweet?text=":"https://www.facebook.com/sharer/sharer.php?u=",t=this.closest(".entry-footer").querySelector(".meta .permalink").getAttribute("href"),n=window.open();n.opener=null,n.location=`${e}${window.location.origin}${t}`}),ek(".entry-vote .vote","click",function(){let e=this.classList.contains("upvote")?"upvote":"downvote";te(e,this.closest(".entry-full").getAttribute("data-id")).then(t=>{let n=t.data.entry[e].feedback;null==n?((this.nextElementSibling||this.previousElementSibling).classList.remove("active"),this.classList.toggle("active")):ep(n,"error",4e3)})}),ek(".comment-vote .vote","click",function(){let e=this.classList.contains("upvote")?"upvote":"downvote";eh({query:"mutation($pk:ID!,$action:String!){entry{votecomment(pk:$pk,action:$action){count}}}",variables:{pk:this.parentNode.getAttribute("data-id"),action:e}}).then(e=>{if(e.errors){e.errors.forEach(e=>{ep(e.message,"error")});return}this.parentNode.querySelectorAll(".vote").forEach(e=>{e!==this&&e.classList.remove("active")}),this.classList.toggle("active"),this.parentNode.querySelector(".rating").textContent=e.data.entry.votecomment.count})}),ek(".entry-actions","click",function(e){let t=e.target.closest(".dropdown-item"),[n]=["message","pin","block","delete","copy","share"].filter(e=>t.classList.contains(e));switch(n){case"message":{let e=this.parentNode.querySelector(".username").textContent,t=this.closest(".entry-full").getAttribute("data-id");e8(e,`\`#${t}\`:
`,this.previousElementSibling);break}case"pin":{let e=this.closest(".entry-full").getAttribute("data-id"),t=ev("body");te("pin",e).then(n=>{eg("a.action[role='button']").forEach(e=>{e.classList.remove("loaded")}),t.getAttribute("data-pin")===e?t.removeAttribute("data-pin"):t.setAttribute("data-pin",e),ep(n.data.entry.pin.feedback)});break}case"block":{let e=this.parentNode.querySelector(".username").textContent,t=ev(".profile-username"),n=t&&t.textContent===e;e9(e,n,this.previousElementSibling);break}case"delete":if(confirm(gettext("are you sure to delete?"))){let e=this.closest(".entry-full"),t=1===eg("ul.topic-view-entries li.entry-full").length;te("delete",e.getAttribute("data-id"),t).then(n=>{let i=n.data.entry.delete;t?window.location=i.redirect:(e.remove(),ep(i.feedback))})}break;case"copy":{let e=this.parentNode.querySelector(".permalink").href;navigator.clipboard.writeText(e).then(()=>{ep(gettext("link copied to clipboard."),"info")});break}case"share":{let e=this.parentNode.querySelector(".permalink").href;navigator.share({url:e})}}});let tt=(e,t=16,n=16)=>`<svg fill="currentColor" viewBox="0 0 ${t} ${n}"><use href="#${e}"></use></svg>`;function tn(e,t=null,n=null){return eh({query:"mutation($content:String!,$pk:ID,$title:String){entry{edit(content:$content,pk:$pk,title:$title){pk,content,feedback}}}",variables:{content:e,title:n,pk:t}}).then(e=>{if(e.errors)e.errors.forEach(e=>{ep(e.message,"error")});else{let t=ev("button.draft-async");return t.textContent=gettext("save changes"),t.hasAttribute("data-pk")||t.after(ea(`<button type="button" class="btn btn-django-link fs-90 ml-3 draft-del">${gettext("delete")}</button>`)),window.onbeforeunload=null,ep(e.data.entry.edit.feedback,"info"),e}})}ek(".entry-full a.action[role='button']","click",function(){if(this.classList.contains("loaded"))return;let e=this.closest(".entry-full"),t=e.getAttribute("data-id"),n=encodeURIComponent(e.closest("[data-topic]").getAttribute("data-topic")),i=this.parentNode.querySelector(".entry-actions"),r=t===ev("body").getAttribute("data-pin")?gettext("unpin from profile"):gettext("pin to profile");i.innerHTML="";let o="";ew&&(e.classList.contains("commentable")&&(o+=`<a target="_blank" href="/entry/${t}/comment/" class="dropdown-item">${tt("comment")}${gettext("comment")}</a>`),e.classList.contains("owner")?o+=`<a role="button" tabindex="0" class="dropdown-item pin">${tt("pin")}${r}</a><a role="button" tabindex="0" class="dropdown-item delete">${tt("trash")}${gettext("delete")}</a><a href="/entry/update/${t}/" class="dropdown-item">${tt("edit",44,44)}${gettext("edit")}</a>`:e.classList.contains("private")||(o+=`<a role="button" tabindex="0" class="dropdown-item message">${tt("message")}${gettext("message")}</a><a role="button" tabindex="0" class="dropdown-item block">${tt("block")}${gettext("block")}</a>`)),eO&&!navigator.share&&(o+=`<a role="button" tabindex="0" class="dropdown-item copy">${tt("link")}${gettext("copy link")}</a>`),navigator.share&&(o+=`<a role="button" tabindex="0" class="dropdown-item share">${tt("share")}${gettext("share")}</a>`),o+=`<a class="dropdown-item" href="/contact/?referrer_entry=${t}&referrer_topic=${n}">${tt("flag")}${gettext("report")}</a>`,i.innerHTML=o,this.classList.add("loaded")}),eb(".delete-entry-redirect","click",function(){confirm(gettext("are you sure to delete?"))&&te("delete",this.getAttribute("data-target-entry"),!0).then(e=>{window.location=e.data.entry.delete.redirect})}),eb(".pin-sync","click",function(){te("pin",this.getAttribute("data-id")).then(e=>{ep(e.data.entry.pin.feedback),window.location=location})}),window.onload=()=>{ev("body").classList.contains("has-entries")&&function(){let e=e=>e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;eg("article.entry p").forEach(t=>{if(e(t)){let e=ea(`<div role="button" tabindex="0" class="read_more">${gettext("continue reading")}</div>`);t.parentNode.append(e),eb(e,"click",function(){t.style.maxHeight="none",this.style.display="none"})}})}()};let ti=ev("#user_title_edit");function tr(e){let t=JSON.parse(ef.get("lfex")||"null");return e?(t&&e.forEach(n=>{t.includes(n)?e=t.filter(e=>e!==n):(t.push(n),e=t)}),ef.set("lfex",JSON.stringify(e),{expires:90}),e):t}eb("button.draft-async","click",function(){let e=this.getAttribute("data-title")||ti&&ti.value,t=this.getAttribute("data-pk"),n=ev("#user_content_edit").value;if(!n.trim()||null!==e&&!e.trim()){ep(gettext("if only you could write down something"),"error");return}if(t){tn(n,t).then(e=>{e&&(ev("p.pw-text").innerHTML=e.data.entry.edit.content)});return}e&&tn(n,null,e).then(e=>{if(e){ev(".user-content").prepend(ea(`<section class="pw-area"><h2 class="h5 text-muted">${gettext("preview")}</h2><p class="text-formatted pw-text">${e.data.entry.edit.content}</p></section>`));let t=e.data.entry.edit.pk;this.setAttribute("data-pk",t),ev("#content-form").prepend(ea(`<input type="hidden" name="pub_draft_pk" value="${t}" />`)),ti&&(ti.disabled=!0,ti.classList.add("highlighted"))}})}),eb(document,"click",e=>{if(e.target.matches("button.draft-del")&&confirm(gettext("Are you sure?"))){let t=ev("button.draft-async");te("delete",t.getAttribute("data-pk")).then(n=>{ev("section.pw-area").remove(),ev("#user_content_edit").value="",ev("[name=pub_draft_pk]").remove(),t.textContent=gettext("keep this as draft"),t.removeAttribute("data-pk"),e.target.remove(),ti&&(ti.disabled=!1,ti.classList.remove("highlighted")),ep(n.data.entry.delete.feedback,"info")})}}),eb(".allowsave","keydown",e=>{(e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase()&&(e.preventDefault(),ev("button.draft-async").dispatchEvent(new Event("click")))});class to{setCookies(){if(ef.set("lfac",this.slug),ef.set("lfnp",this.page),this.tab?ef.set("lfat",this.tab):this.tab=ef.get("lfat")||null,this.extra?ef.set("lfea",this.extra):this.extra=ef.get("lfea")||null,"today-in-history"===this.slug){let e=ef.get("lfsy");this.year?ef.set("lfsy",this.year):this.year=e||null}else if("search"===this.slug){let e=ef.get("lfsp");this.searchKeys?ef.set("lfsp",this.searchKeys):this.searchKeys=e||null}else"popular"===this.slug&&(this.exclusions=tr(this.exclusions))}call(){this.loadIndicator.style.display="inline",eh({query:`query($slug: String!,$year:Int,$page:Int,$searchKeys:String,$refresh:Boolean,$tab:String,
            $exclusions:[String],$extra:JSONString){topics(slug:$slug,year:$year,page:$page,searchKeys:$searchKeys,
            refresh:$refresh,tab:$tab,exclusions:$exclusions,extra:$extra){
                safename refreshCount year yearRange slugIdentifier parameters
                page { objectList { slug title count } paginator { pageRange numPages } number hasOtherPages hasNext }
                tabs{current available{name, safename}}
                exclusions{active, available{name, slug, description}}
            }}`,variables:{slug:this.slug,year:parseInt(this.year,10),page:parseInt(this.page,10),searchKeys:this.searchKeys,refresh:this.refresh,tab:this.tab,exclusions:this.exclusions,extra:this.extra}},!0).then(e=>{e.errors?(this.loadIndicator.style.display="none",ep(gettext("something went wrong"),"error")):this.render(e.data.topics)})}render(e){ev("#left-frame-nav").scroll({top:0,behavior:"smooth"}),ev("#current_category_name").textContent=e.safename,this.renderRefreshButton(e.refreshCount),this.renderYearSelector(e.year,e.yearRange),this.renderPagination(e.page.hasOtherPages,e.page.paginator.pageRange,e.page.paginator.numPages,e.page.number,e.page.hasNext),this.renderTopicList(e.page.objectList,e.slugIdentifier,e.parameters),this.renderShowMoreButton(e.page.number,e.page.hasOtherPages),this.renderTabs(e.tabs),this.renderExclusions(e.exclusions),this.loadIndicator.style.display="none"}renderRefreshButton(e){let t=ev("#refresh_bugun");e?(t.classList.remove("dj-hidden"),ev("span#new_content_count").textContent=`(${e})`):t.classList.add("dj-hidden")}renderShowMoreButton(e,t){let n=ev("a#show_more");1===e&&t?n.classList.remove("d-none"):n.classList.add("d-none")}renderTabs(e){let t=ev("ul#left-frame-tabs");e?(t.innerHTML="",e.available.forEach(n=>{t.innerHTML+=`<li class="nav-item"><a role="button" tabindex="0" data-lf-slug="${this.slug}" data-tab="${n.name}" class="nav-link${e.current===n.name?" active":""}">${n.safename}</a></li>`}),t.classList.remove("dj-hidden")):t.classList.add("dj-hidden")}renderExclusions(e){let t=ev("#popular_excluder"),n=ev("#exclusion-choices"),i=n.querySelector("ul.exclusion-choices");e?(i.innerHTML="",t.classList.remove("dj-hidden"),e.available.forEach(t=>{let n=e.active.includes(t.slug);i.innerHTML+=`<li><a role="button" title="${t.description}" ${n?'class="active"':""} tabindex="0" data-slug="${t.slug}">#${t.name}</a></li>`}),e.active.length?t.classList.add("active"):t.classList.remove("active")):(t.classList.add("dj-hidden"),n.classList.add("dj-hidden"))}renderYearSelector(e,t){let n=ev("#year_select");n.innerHTML="","today-in-history"===this.slug?(n.style.display="block",t.forEach(t=>{n.innerHTML+=`<option ${t===e?"selected":""} id="${t}">${t}</option>`})):n.style.display="none"}renderTopicList(e,t,n){let i=ev("ul#topic-list");if(0===e.length)i.innerHTML=`<small>${gettext("nothing here")}</small>`;else{i.innerHTML="";let r=n||"",o="";e.forEach(e=>{o+=`<li class="list-group-item"><a href="${t}${e.slug}/${r}">${ec(e.title)}<small class="total_entries">${e.count&&"0"!==e.count?e.count:""}</small></a></li>`}),o&&(i.innerHTML=o)}}renderPagination(e,t,n,i,r){let o=ev("#lf_pagination_wrapper"),a=ev("select#left_frame_paginator"),s=ev("#lf_total_pages"),l=ev("#lf_navigate_after");if(e&&1!==i){a.innerHTML="";let e="";t.forEach(t=>{e+=`<option ${t===i?"selected":""} value="${t}">${t}</option>`}),a.innerHTML+=e,s.textContent=n,l.classList[r?"remove":"add"]("d-none"),o.classList.remove("dj-hidden")}else o.classList.add("dj-hidden")}static populate(e,t=1,...n){eD||new to(e,t,...n).call()}static refreshPopulate(){to.populate("today",1,null,null,!0)}constructor(e,t=1,n=null,i=null,r=!1,o=null,a=null,s=null){this.slug=e,this.page=t,this.year=n,this.refresh=r,this.searchKeys=i,this.tab=o,this.exclusions=a,this.extra=s,this.setCookies(),this.loadIndicator=ev("#load_indicator")}}eb("body","click",e=>{let t=e.target.closest("[data-lf-slug]");if(t&&!eD){let n=t.getAttribute("data-lf-slug"),i=t.getAttribute("data-tab")||null,r=t.getAttribute("data-lf-extra")||null;to.populate(n,1,null,null,!1,i,null,r),t.classList.contains("dropdown-item")&&e.stopPropagation(),e.preventDefault()}}),eb("#year_select","change",function(){let e=this.value;to.populate("today-in-history",1,e)}),eb("select#left_frame_paginator","change",function(){to.populate(ef.get("lfac"),this.value)});let ta=ev("select#left_frame_paginator"),ts=ev("#lf_total_pages"),tl=new Event("change");function tc(e){if(!e)return;let t="search";eD&&(window.location=`/threads/${t}/?${e}`),to.populate(t,1,null,e)}function tu(e,t=""){return eh({query:"mutation wish($title:String!,$hint:String){topic{wish(title:$title,hint:$hint){feedback hint}}}",variables:{title:e,hint:t}})}eb(ts,"click",function(){ta.value!==this.textContent&&(ta.value=this.textContent,ta.dispatchEvent(tl))}),eb("#lf_navigate_before","click",()=>{let e=parseInt(ta.value,10);e-1>0&&(ta.value=e-1,ta.dispatchEvent(tl))}),eb("#lf_navigate_after","click",()=>{let e=parseInt(ta.value,10);e+1<=parseInt(ts.textContent,10)&&(ta.value=e+1,ta.dispatchEvent(tl))}),eb("a#show_more","click",function(){let e=ef.get("lfac");e&&(to.populate(e,2),ev("#left-frame-nav").scroll(0,0)),this.classList.add("d-none")}),eb("#refresh_bugun","click",to.refreshPopulate),ek(".exclusion-button","click",function(){this.closest("div").parentNode.querySelector(".exclusion-settings").classList.toggle("dj-hidden")}),eb("#exclusion-choices","click",e=>{"A"===e.target.tagName&&(e.target.classList.toggle("active"),to.populate("popular",1,null,null,null,null,[e.target.getAttribute("data-slug")]))}),eb("#exclusion-settings-mobile","click",e=>{"A"===e.target.tagName&&(tr([e.target.getAttribute("data-slug")]),window.location=location)}),ek("[data-lf-slug]","click",function(){eg("[data-lf-slug]").forEach(e=>e.classList.remove("active")),eg(`[data-lf-slug=${this.getAttribute("data-lf-slug")}]`).forEach(e=>e.classList.add("active"))}),eb("select#mobile_year_changer","change",function(){window.location=es(location.href,"year",this.value)}),eb("#left-frame-nav","scroll",function(){localStorage.setItem("where",this.scrollTop)}),eb("button#perform_advanced_search","click",()=>{let e=ev("input#in_favorites_dropdown"),t=ev("input#keywords_dropdown").value,n=ev("input#author_nick_dropdown").value,i=ev("input#nice_ones_dropdown").checked,r=e&&e.checked,o=ev("input#date_from_dropdown").value;tc(function(e){let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}({keywords:t,author_nick:n,is_nice_ones:i,is_in_favorites:r,from_date:o,to_date:ev("input#date_to_dropdown").value,ordering:ev("select#ordering_dropdown").value}))}),ek("body","click",e=>{if(e.target.matches("a[role=button].quicksearch")){let t=e.target.getAttribute("data-keywords");tc((t.startsWith("@")&&t.substr(1)?`author_nick=${t.substr(1)}`:`keywords=${t}`)+"&ordering=newer")}}),eb(".follow-topic-trigger","click",function(){var e,t;em(this,gettext("unfollow"),gettext("follow")),e="follow",t=this.getAttribute("data-topic-id"),eh({query:`mutation{topic{${e}(pk:"${t}"){feedback}}}`}).then(t=>{ep(t.data.topic[e].feedback)})}),ek(".suggestion-vote button","click",function(){let e=this.classList.contains("up")?1:-1,t=this.parentNode.getAttribute("data-topic");eh({query:"mutation($category:String!,$topic:String!,$direction:Int!){category{suggest(category:$category,topic:$topic,direction:$direction){feedback}}}",variables:{category:this.parentNode.getAttribute("data-category"),topic:t,direction:e}}).then(e=>{e.errors?e.errors.forEach(e=>{ep(e.message,"error")}):(this.classList.toggle("btn-django-link"),(this.nextElementSibling||this.previousElementSibling).classList.remove("btn-django-link"))})}),eb("a.wish-prepare[role=button]","click",function(){this.parentNode.querySelectorAll(":not(.wish-purge):not(.wish-prepare)").forEach(e=>{e.classList.toggle("dj-hidden")}),em(this,gettext("someone should populate this"),gettext("nevermind"))}),eb("a.wish-send[role=button]","click",function(){let e=this.parentNode.querySelector("textarea"),t=e.value;if(t&&!eo(t)){ep(gettext("this content includes forbidden characters."),"error");return}tu(this.parentNode.getAttribute("data-topic"),t).then(t=>{if(t.errors){t.errors.forEach(e=>{ep(e.message,"error")});return}e.value="",Array.from(this.parentNode.children).forEach(e=>{e.classList.toggle("dj-hidden")});let n=t.data.topic.wish.hint,i=ev("ul#wish-list");i.classList.remove("dj-hidden"),i.prepend(ea(`<li class="list-group-item owner">${gettext("you just wished for this topic.")} ${n?`${gettext("your hint:")} <p class="m-0 text-formatted"><i>${n}</i></p>`:""}</li>`)),window.scrollTo({top:0,behavior:"smooth"}),ep(t.data.topic.wish.feedback)})}),eb("a.wish-purge[role=button]","click",function(){let e=this.parentNode.getAttribute("data-topic");confirm(gettext("are you sure to delete?"))&&tu(e).then(e=>{this.classList.toggle("dj-hidden");let t=ev("ul#wish-list"),n=this.parentNode.querySelector(".wish-prepare");n.textContent=gettext("someone should populate this"),n.classList.toggle("dj-hidden"),t.querySelector("li.owner").remove(),t.children.length||t.classList.add("dj-hidden"),ep(e.data.topic.wish.feedback)})}),eb(".snap-user-content","click",()=>{ev("#user_content_edit").focus()});let td=ev(".topic-view-entries"),tp=ev(".pagination");if(td&&tp){let e=tp.cloneNode(!0);e.style.justifyContent="flex-end",e.classList.add("mt-2"),td.after(e)}}();